<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <title>FOSS Maps - 01</title>
  <link rel="stylesheet" type="text/css" href="../css/site.css">
  <script type="text/javascript" src="../js/getjson.js"></script>
  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
  integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
  crossorigin=""/>

  <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
  integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
  crossorigin=""></script>

</head>
<body>
  <div class="heading">
    <h1>Martiño Rivera Dourado (18111777)</h1>
    <h2>My trips record</h2>
  </div>

  <div id="map"></div>

  <script type="text/javascript">

    // Mapbox tile server

    var mapboxlayer = L.tileLayer(
    'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiMTgxMTE3NzciLCJhIjoiY2pyNm04azU3MGM0ODQ4bGhscXhjcHAzZyJ9.oZ8rkgiiXS6v5h6hGcKezg', {
      maxZoom: 18,
      attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
        '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
        'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
      id: 'mapbox.streets'
    });

    // Idea: semen tile server. Let the user choose the tile server
    // Add ships, planes...

    var stamenlayer = L.tileLayer(
      'http://tile.stamen.com/watercolor/{z}/{x}/{y}.jpg',{
      maxZoom: 18,
      attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. '
                  + 'Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',
      id: 'stamen.watercolor'
    });

    // Init map
    var mymap = L.map('map', {
      center: [51.505, -0.09],
      zoom: 4,
      layers: [mapboxlayer, stamenlayer]
    });

    // Add controls
    var baseMaps = {
      "Mapbox": mapboxlayer,
      "Stamen": stamenlayer
    };
    L.control.layers(baseMaps).addTo(mymap);  // Choose base maps


    // Add data layer
    // Add manual markers and enable pop-up info. Idea: where I have been (like a record of my trips)

    // Personalized icon
    // Icon made by https://www.flaticon.com/authors/freepik from www.flaticon.com
    var earth_icon = L.icon({
      iconUrl: '../data/marker_earth.png',
      iconSize: [45, 45],
    });

    // Personalized class of a marker with a description
    class PopMarker {
      constructor({location, description}){
        this.description = description;
        this.popup = L.popup({closeButton: false});
        this.marker = L.marker(location, {icon: earth_icon});
      };

      add(map) {
        this.popup.setContent(this.description);
        this.marker.bindPopup(this.popup);
        this.marker.addTo(map);
      }
    };


    // Creation of markers
    var uni_spain = new PopMarker({
      location: [43.333046, -8.411017],
      description: 'University of A Coruña',
    });

    var usw = new PopMarker({
      location: [51.590030, -3.329507],
      description: 'University of South Wales',
    });

    // Add the markers
    var markers = [uni_spain, usw];
    markers.forEach(
      function(item){
        item.add(mymap);
      }
    );

  </script>

</body>
</html>
